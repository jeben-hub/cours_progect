<p>
  <strong>Title:</strong>
  <%= @fanfic.title %>
</p>

<p>
  <strong>Description:</strong>
  <%= @fanfic.description %>
</p>

<p>
  <strong>Genre:</strong>
  <%= @fanfic.genre.name %>
</p>

<p>
  <strong>User:</strong>
  <%= @fanfic.user_id %>
</p>

<p>
  Tags:
  <% @fanfic.tags.each do |tag| %>
    <%= link_to tag.name, root_path %>
  <% end %>
</p>

<h1>Chapters</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Body</th>
      <th>Fanfic</th>
      <th>Number</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @chapters.each do |chapter| %>
      <tr>
        <td><%= chapter.name %></td>
        <td><%= markdown(chapter.body) %></td>
        <td><%= chapter.fanfic_id %></td>
        <td><%= chapter.number %></td>
        <td><%= link_to 'Show', fanfic_chapter_path(@fanfic, chapter) %></td>
        <td><%= link_to 'Edit', edit_fanfic_chapter_path(@fanfic, chapter) %></td>
        <td><%= link_to 'Destroy', fanfic_chapter_path(@fanfic, chapter), method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Chapter', new_fanfic_chapter_path(@fanfic) %>

<% @fanfic.comments.each do |comment| %>
  <h1><%= comment.user.name %></h1>
  <p><%= comment.body %></p>
  <%= link_to 'Delete', comment, method: :delete, data: { confirm: 'Are you sure?' } if has_access?(comment.user.id) %>
<% end %>

<%= form_for([@fanfic, @fanfic.comments.build]) do |form| %>

  <div class="field">
    <%= form.label :body %>
    <%= form.text_area :body %>
  </div>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>

<%= link_to 'Back', root_path %>
